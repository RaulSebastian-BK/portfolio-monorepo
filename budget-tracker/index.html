<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Personal Budget Tracker ‚Äî Controla tus finanzas</title>
  <meta name="description" content="App simple para llevar ingresos, gastos y presupuestos por categor√≠a. Gr√°ficas, exportaci√≥n e importaci√≥n con JSON.">

  <meta name="theme-color" content="#0e1116"/>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Ctext y='50' x='10' font-size='48'%3Eüí∏%3C/text%3E%3C/svg%3E"/>

  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css"/>
</head>
<body>
  <header class="container" aria-label="Barra superior">
    <div class="brand">
      <h1>Personal <span>Budget</span> Tracker</h1>
      <p id="currentMonthText" class="muted">Controla tus finanzas</p>
    </div>
    <div class="toolbar" role="group" aria-label="Herramientas">
      <label class="sr-only" for="currencySelect">Moneda</label>
      <select id="currencySelect" title="Moneda">
        <option value="MXN" selected>MXN $</option>
        <option value="USD">USD $</option>
        <option value="EUR">EUR ‚Ç¨</option>
        <option value="COP">COP $</option>
        <option value="ARS">ARS $</option>
      </select>

      <button id="themeBtn" class="ghost" aria-label="Cambiar tema" title="Cambiar tema">üåô</button>
      <button id="exportBtn" title="Exportar datos a JSON">Exportar</button>

      <label for="importFile" class="ghost import-label" title="Importar JSON">Importar</label>
      <input id="importFile" type="file" accept="application/json" hidden/>

      <button id="clearBtn" class="danger ghost" title="Borrar todos los datos">Borrar todo</button>
    </div>
  </header>

  <main class="container grid">
    <!-- KPIs -->
    <section class="grid-3" aria-label="Indicadores clave">
      <div class="card stat">
        <span class="k">Balance</span>
        <h3 id="balance" data-amount="0" aria-live="polite">$0</h3>
      </div>
      <div class="card stat">
        <span class="k">Ingresos</span>
        <h3 id="incomeTotal" data-amount="0" aria-live="polite">$0</h3>
      </div>
      <div class="card stat">
        <span class="k">Gastos</span>
        <h3 id="expenseTotal" data-amount="0" aria-live="polite">$0</h3>
      </div>
    </section>

    <!-- Filtros -->
    <section class="card" aria-label="Filtros">
      <div class="section-head">
        <h2>Filtros</h2>
        <div class="meta"><span class="badge" id="monthLabel">Mes actual</span></div>
      </div>
      <div class="row">
        <div class="field">
          <label for="monthFilter">Mes</label>
          <input type="month" id="monthFilter"/>
        </div>
        <div class="field">
          <label for="typeFilter">Tipo</label>
          <select id="typeFilter">
            <option value="all">Todos</option>
            <option value="income">Ingresos</option>
            <option value="expense">Gastos</option>
          </select>
        </div>
        <div class="field grow">
          <label for="searchInput">Buscar</label>
          <input type="search" id="searchInput" placeholder="Descripci√≥n o categor√≠a‚Ä¶"/>
        </div>
      </div>
    </section>

    <!-- Form de transacci√≥n -->
    <section class="card" aria-label="Agregar transacci√≥n">
      <div class="section-head"><h2>Agregar transacci√≥n</h2></div>
      <div class="row">
        <div class="field">
          <label for="type">Tipo</label>
          <select id="type">
            <option value="expense" selected>Gasto</option>
            <option value="income">Ingreso</option>
          </select>
        </div>
        <div class="field">
          <label for="amount">Monto</label>
          <input type="number" id="amount" step="0.01" min="0" placeholder="0.00"/>
        </div>
        <div class="field grow">
          <label for="category">Categor√≠a</label>
          <input list="categories" id="category" placeholder="Ej. Comida"/>
          <datalist id="categories">
            <option>Comida</option><option>Transporte</option><option>Renta</option>
            <option>Servicios</option><option>Salud</option><option>Ocio</option>
            <option>Educaci√≥n</option><option>Salario</option><option>Venta</option>
          </datalist>
        </div>
        <div class="field grow">
          <label for="note">Descripci√≥n</label>
          <input id="note" placeholder="Nota (opcional)"/>
        </div>
        <div class="field">
          <label for="date">Fecha</label>
          <input type="date" id="date"/>
        </div>
        <div class="field">
          <label class="sr-only" for="addBtn">Agregar</label>
          <button id="addBtn" class="primary">Agregar</button>
        </div>
      </div>
      <p class="hint muted">Tip: presiona <kbd>Enter</kbd> en ‚ÄúDescripci√≥n‚Äù para agregar m√°s r√°pido.</p>
    </section>

    <!-- Presupuestos -->
    <section class="card" aria-label="Presupuesto por categor√≠a">
      <div class="section-head"><h2>Presupuesto mensual por categor√≠a</h2></div>
      <div class="row">
        <div class="field grow">
          <label for="budgetCategory">Categor√≠a</label>
          <input list="categories" id="budgetCategory" placeholder="Ej. Comida"/>
        </div>
        <div class="field">
          <label for="budgetAmount">Presupuesto</label>
          <input type="number" id="budgetAmount" step="0.01" min="0" placeholder="0.00"/>
        </div>
        <div class="field">
          <label class="sr-only" for="setBudgetBtn">Guardar presupuesto</label>
          <button id="setBudgetBtn">Guardar</button>
        </div>
      </div>
      <div id="budgetsList" class="budget-list" aria-live="polite"></div>
    </section>

    <!-- Tabla -->
    <section class="card" aria-label="Transacciones">
      <div class="section-head"><h2>Transacciones</h2></div>
      <div class="table-wrap">
        <table>
          <thead>
            <tr>
              <th>Fecha</th><th>Tipo</th><th>Categor√≠a</th><th>Descripci√≥n</th><th class="num">Monto</th><th></th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
      <p id="emptyState" class="muted empty" style="display:none;">
        <span>üóÇÔ∏è</span> No hay transacciones en este mes.
      </p>
    </section>

    <!-- Charts -->
    <section class="grid-2" aria-label="Gr√°ficas">
      <div class="card"><h2>Gasto por categor√≠a</h2><canvas id="pieChart" height="220"></canvas></div>
      <div class="card"><h2>Flujo de caja (mes)</h2><canvas id="lineChart" height="220"></canvas></div>
    </section>
  </main>

  <footer class="container foot">
    Hecho con ü§ç y JavaScript ‚Äî Portafolio de
    <a href="https://raulsebastian.vercel.app" target="_blank" rel="noopener">Ra√∫l Sebasti√°n</a>
  </footer>

  <!-- Toasts -->
  <div id="toast" role="status" aria-live="polite"></div>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1"></script>
  <script src="script.js"></script>
</body>
</html>
